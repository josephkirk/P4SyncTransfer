{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "UseExternalP4": {
      "type": "boolean",
      "description": "Whether to use external p4.exe instead of embedded P4 library",
      "default": true
    },
    "Filters": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Global filters to apply"
    },
    "SyncProfiles": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/SyncProfile"
      },
      "description": "List of sync profiles"
    },
    "Logging": {
      "$ref": "#/definitions/LoggingConfiguration",
      "description": "Logging configuration"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "SyncProfile": {
      "type": "object",
      "properties": {
        "Name": {
          "type": "string",
          "description": "Name of the sync profile"
        },
        "Source": {
          "$ref": "#/definitions/P4Connection",
          "description": "Source Perforce connection"
        },
        "Target": {
          "$ref": "#/definitions/P4Connection",
          "description": "Target Perforce connection"
        },
        "SyncFilter": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^//[^/]+/.*",
            "examples": [
              "//depot/main/...txt",
              "//depot/projects/...cs",
              "//depot/docs/...md"
            ]
          },
          "description": "Perforce filespec patterns for files to sync (e.g., '//depot/main/...txt', '//depot/folder/...json')"
        },
        "Schedule": {
          "type": "string",
          "description": "Cron schedule for automatic sync"
        }
      },
      "required": ["Name", "Source", "Target"],
      "additionalProperties": false
    },
    "P4Connection": {
      "type": "object",
      "properties": {
        "Port": {
          "type": "string",
          "description": "Perforce server port"
        },
        "User": {
          "type": "string",
          "description": "Perforce username"
        },
        "Workspace": {
          "type": "string",
          "description": "Perforce workspace/client name"
        }
      },
      "required": ["Port", "User", "Workspace"],
      "additionalProperties": false
    },
    "LoggingConfiguration": {
      "type": "object",
      "properties": {
        "LogLevel": {
          "type": "object",
          "properties": {
            "Default": {
              "type": "string",
              "enum": ["Trace", "Debug", "Information", "Warning", "Error", "Critical"]
            }
          },
          "additionalProperties": {
            "type": "string",
            "enum": ["Trace", "Debug", "Information", "Warning", "Error", "Critical"]
          }
        },
        "Console": {
          "type": "object",
          "properties": {
            "FormatterName": {
              "type": "string"
            },
            "IncludeScopes": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  }
}